<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/EyalAr/lwip"

    >lwip (v0.0.9)</a>
</h1>
<h4>Comprehensive, fast, and simple image processing and manipulation</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.lwip">module lwip</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch">
            function <span class="apidocSignatureSpan">lwip.</span>Batch
            <span class="apidocSignatureSpan">(image)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image">
            function <span class="apidocSignatureSpan">lwip.</span>Image
            <span class="apidocSignatureSpan">(pixelsBuf, width, height, trans, metadata)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.create">
            function <span class="apidocSignatureSpan">lwip.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.open">
            function <span class="apidocSignatureSpan">lwip.</span>open
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lwip.</span>Batch.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lwip.</span>Image.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lwip.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lwip.Batch">module lwip.Batch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.Batch">
            function <span class="apidocSignatureSpan">lwip.</span>Batch
            <span class="apidocSignatureSpan">(image)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lwip.Batch.prototype">module lwip.Batch.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.__addOp">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>__addOp
            <span class="apidocSignatureSpan">(handle, args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.blur">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>blur
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.border">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>border
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.contain">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>contain
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.cover">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>cover
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.crop">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>crop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.darken">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>darken
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.exec">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>exec
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.fade">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>fade
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.flip">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>flip
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.hslaAdjust">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>hslaAdjust
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.hue">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>hue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.lighten">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>lighten
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.mirror">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>mirror
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.opacify">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>opacify
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.pad">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>pad
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.paste">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>paste
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.resize">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>resize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.rotate">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>rotate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.saturate">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>saturate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.scale">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>scale
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.setPixel">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>setPixel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.sharpen">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>sharpen
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.toBuffer">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>toBuffer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Batch.prototype.writeFile">
            function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>writeFile
            <span class="apidocSignatureSpan">(outpath, type, params, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lwip.Image">module lwip.Image</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.Image">
            function <span class="apidocSignatureSpan">lwip.</span>Image
            <span class="apidocSignatureSpan">(pixelsBuf, width, height, trans, metadata)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lwip.Image.prototype">module lwip.Image.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.__lock">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>__lock
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.__release">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>__release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.batch">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>batch
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.blur">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>blur
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.border">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>border
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.clone">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>clone
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.contain">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>contain
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.cover">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>cover
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.crop">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>crop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.darken">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>darken
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.extract">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>extract
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.fade">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>fade
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.flip">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>flip
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.getMetadata">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>getMetadata
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.getPixel">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>getPixel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.height">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>height
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.hslaAdjust">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>hslaAdjust
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.hue">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>hue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.lighten">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>lighten
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.mirror">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>mirror
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.opacify">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>opacify
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.pad">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>pad
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.paste">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>paste
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.resize">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>resize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.rotate">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>rotate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.saturate">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>saturate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.scale">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>scale
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.setMetadata">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>setMetadata
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.setPixel">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>setPixel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.sharpen">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>sharpen
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.size">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>size
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.toBuffer">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>toBuffer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.width">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>width
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.Image.prototype.writeFile">
            function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>writeFile
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lwip.util">module lwip.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.util.getClosest2Exp">
            function <span class="apidocSignatureSpan">lwip.util.</span>getClosest2Exp
            <span class="apidocSignatureSpan">(num)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.util.makeRgbaBuffer">
            function <span class="apidocSignatureSpan">lwip.util.</span>makeRgbaBuffer
            <span class="apidocSignatureSpan">(orig, channels)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.util.normalizeColor">
            function <span class="apidocSignatureSpan">lwip.util.</span>normalizeColor
            <span class="apidocSignatureSpan">(color)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.util.normalizeGifParams">
            function <span class="apidocSignatureSpan">lwip.util.</span>normalizeGifParams
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.util.normalizeJpegParams">
            function <span class="apidocSignatureSpan">lwip.util.</span>normalizeJpegParams
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.util.normalizePngParams">
            function <span class="apidocSignatureSpan">lwip.util.</span>normalizePngParams
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lwip.util.undefinedFilter">
            function <span class="apidocSignatureSpan">lwip.util.</span>undefinedFilter
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lwip" id="apidoc.module.lwip">module lwip</a></h1>


    <h2>
        <a href="#apidoc.element.lwip.Batch" id="apidoc.element.lwip.Batch">
        function <span class="apidocSignatureSpan">lwip.</span>Batch
        <span class="apidocSignatureSpan">(image)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Batch(image) {
    this.__image = image;
    this.__queue = [];
    this.__running = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image" id="apidoc.element.lwip.Image">
        function <span class="apidocSignatureSpan">lwip.</span>Image
        <span class="apidocSignatureSpan">(pixelsBuf, width, height, trans, metadata)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Image(pixelsBuf, width, height, trans, metadata) {
    this.__lwip = new lwip_image.LwipImage(pixelsBuf, width, height);
    this.__locked = false;
    this.__trans = trans;
    this.__metadata = metadata;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.create" id="apidoc.element.lwip.create">
        function <span class="apidocSignatureSpan">lwip.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function create() {
    decree(defs.args.create)(arguments, function(width, height, color, callback) {
        color = util.normalizeColor(color);
        var trans = color.a &#x3c; 100,
            c_len = width * height,
            pixelsBuf = new Buffer(c_len * 4);
        for (var i = 0; i &#x3c; width * height; i++) {
            pixelsBuf[i] = color.r;
            pixelsBuf[c_len + i] = color.g;
            pixelsBuf[2 * c_len + i] = color.b;
            pixelsBuf[3 * c_len + i] = color.a;
        }
        setImmediate(function() {
            callback(null, new Image(pixelsBuf, width, height, trans));
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      // image.resize(...), etc.
  });
});
```

### Create a new image

`lwip.<span class="apidocCodeKeywordSpan">create</span>(width, height, color, callback)`

0. `width {Integer&#x3e;0}`: The width of the new image.
0. `height {Integer&#x3e;0}`: The height of the new image.
0. `color {String / Array / Object}`: **Optional** Color of the canvas. See
   [colors specification](#colors-specification). Defaults to a transparent
   canvas `{r:0, g:0, b:0, a:0}`.
0. `callback {Function(err, image)}`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.open" id="apidoc.element.lwip.open">
        function <span class="apidocSignatureSpan">lwip.</span>open
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function open() {
    decree(defs.args.open)(arguments, function(source, type, callback) {
        var opener;
        if (typeof source === &#x27;string&#x27;) {
            type = type || path.extname(source).slice(1);
            if (typeof type !== &#x27;string&#x27;) throw Error(&#x27;Invalid type&#x27;);
            opener = getOpener(type);
            fs.readFile(source, function(err, imbuff) {
                if (err) return callback(err);
                opener(imbuff, function(err, pixelsBuf, width, height, channels, trans, metadata) {
                    callback(err, err ? null : new Image(pixelsBuf, width, height, trans, metadata));
                });
            });
        } else if (source instanceof Buffer) {
            if (typeof type === &#x27;object&#x27;) {
                // it&#x27;s a raw pixels buffer
                var channelSize = type.width * type.height;
                var numChannels = source.length / channelSize;
                if (numChannels !== parseInt(numChannels) || numChannels &#x3c; 1 || numChannels &#x3e; 4)
                    throw Error(&#x22;Buffer size does not match width and height&#x22;);
                if (numChannels !== 4) source = util.makeRgbaBuffer(source, numChannels);
                callback(null, new Image(source, type.width, type.height, (numChannels % 2 === 0)));
            } else if (typeof type === &#x27;string&#x27;) {
                // it&#x27;s an encoded image
                opener = getOpener(type);
                opener(source, function(err, pixelsBuf, width, height, channels, trans, metadata) {
                    callback(err, err ? null : new Image(pixelsBuf, width, height, trans, metadata));
                });
            } else throw Error(&#x27;Invalid type&#x27;);
        } else throw Error(&#x22;Invalid source&#x22;);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. Manipulate it.
0. Save to disk / Send image buffer over network / etc.

**Example (batch operations):**

```Javascript
// obtain an image object:
require(&#x27;lwip&#x27;).<span class="apidocCodeKeywordSpan">open</span>(&#x27;image.jpg&#x27;, function(err, image){

// check err...
// define a batch of manipulations and save to disk as JPEG:
image.batch()
  .scale(0.75)          // scale to 75%
  .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
  .crop(200, 200)       // crop a 200X200 square from center
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lwip.Batch" id="apidoc.module.lwip.Batch">module lwip.Batch</a></h1>


    <h2>
        <a href="#apidoc.element.lwip.Batch.Batch" id="apidoc.element.lwip.Batch.Batch">
        function <span class="apidocSignatureSpan">lwip.</span>Batch
        <span class="apidocSignatureSpan">(image)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Batch(image) {
    this.__image = image;
    this.__queue = [];
    this.__running = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lwip.Batch.prototype" id="apidoc.module.lwip.Batch.prototype">module lwip.Batch.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.__addOp" id="apidoc.element.lwip.Batch.prototype.__addOp">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>__addOp
        <span class="apidocSignatureSpan">(handle, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__addOp = function (handle, args) {
    this.__queue.push({
        handle: handle,
        args: args
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        });
    });
};

Batch.prototype.scale = function() {
    var that = this;
    judges.scale(arguments, function(wRatio, hRatio, inter) {
        that.<span class="apidocCodeKeywordSpan">__addOp</span>(that.__image.scale, [wRatio, hRatio, inter].filter(undefinedFilter
));
    });
    return this;
};

Batch.prototype.resize = function() {
    var that = this;
    judges.resize(arguments, function(width, height, inter) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.blur" id="apidoc.element.lwip.Batch.prototype.blur">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>blur
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">blur = function () {
    var that = this;
    judges.blur(arguments, function(sigma) {
        that.__addOp(that.__image.blur, [sigma].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // check err...
  // define a batch of manipulations and save to disk as JPEG:
  image.batch()
    .scale(0.75)          // scale to 75%
    .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
    .crop(200, 200)       // crop a 200X200 square from center
    .<span class="apidocCodeKeywordSpan">blur</span>(5)              // Gaussian blur with SD=5
    .writeFile(&#x27;output.jpg&#x27;, function(err){
      // check err...
      // done.
    });

});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.border" id="apidoc.element.lwip.Batch.prototype.border">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>border
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">border = function () {
    var that = this;
    judges.border(arguments, function(width, color) {
        color = normalizeColor(color);
        that.__addOp(that.__image.border, [width, color].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Alias of [`mirror`](#mirror).

#### Border

Add a colored border to the image.

`image.<span class="apidocCodeKeywordSpan">border</span>(width, color, callback)`

0. `width {Integer}`: Border width in pixels.
0. `color {String / Array / Object}`: **Optional** Color of the border. See
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Pad
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.contain" id="apidoc.element.lwip.Batch.prototype.contain">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>contain
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">contain = function () {
    var that = this;
    judges.contain(arguments, function(width, height, color, inter) {
        that.__addOp(that.__image.contain, [width, height, color, inter].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `callback {Function(err, image)}`

#### Contain

Contain the image in a colored canvas. The image will be resized to the largest
possible size such that it&#x27;s fully contained inside the canvas.

`image.<span class="apidocCodeKeywordSpan">contain</span>(width, height, color, inter, callback)`

0. `width {Integer}`: Canvas&#x27; width in pixels.
0. `height {Integer}`: Canvas&#x27; height in pixels.
0. `color {String / Array / Object}`: **Optional** Color of the canvas. See
[colors specification](#colors-specification).
0. `inter {String}`: **Optional** interpolation method. Defaults to `&#x22;lanczos&#x22;`.
Possible values:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.cover" id="apidoc.element.lwip.Batch.prototype.cover">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>cover
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cover = function () {
    var that = this;
    judges.cover(arguments, function(width, height, inter) {
        that.__addOp(that.__image.cover, [width, height, inter].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### Cover

Cover a canvas with the image. The image will be resized to the smallest
possible size such that both its dimensions are bigger than the canvas&#x27;s
dimensions. Margins of the image exceeding the canvas will be discarded.

`image.<span class="apidocCodeKeywordSpan">cover</span>(width, height, inter, callback)`

0. `width {Integer}`: Canvas&#x27; width in pixels.
0. `height {Integer}`: Canvas&#x27; height in pixels.
0. `inter {String}`: **Optional** interpolation method. Defaults to `&#x22;lanczos&#x22;`.
Possible values:
- `&#x22;nearest-neighbor&#x22;`
- `&#x22;moving-average&#x22;`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.crop" id="apidoc.element.lwip.Batch.prototype.crop">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>crop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">crop = function () {
    var that = this;
    judges.crop(arguments, function(left, top, right, bottom) {
        that.__addOp(that.__image.crop, [left, top, right, bottom].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
require(&#x27;lwip&#x27;).open(&#x27;image.jpg&#x27;, function(err, image){

  // check err...
  // define a batch of manipulations and save to disk as JPEG:
  image.batch()
    .scale(0.75)          // scale to 75%
    .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
    .<span class="apidocCodeKeywordSpan">crop</span>(200, 200)       // crop a 200X200 square from center
    .blur(5)              // Gaussian blur with SD=5
    .writeFile(&#x27;output.jpg&#x27;, function(err){
      // check err...
      // done.
    });

});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.darken" id="apidoc.element.lwip.Batch.prototype.darken">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>darken
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">darken = function () {
    var that = this;
    judges.darken(arguments, function(delta) {
        that.__addOp(that.__image.darken, [delta].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `image.lighten(-1, ...)` will decrease the lightness by 100%, effectively
   making the image black.

#### Darken

Adjust image lightness.

`image.<span class="apidocCodeKeywordSpan">darken</span>(delta, callback)`

Equivalent to `image.lighten(-delta, callback)`.

#### Hue

Adjust image hue.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.exec" id="apidoc.element.lwip.Batch.prototype.exec">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>exec
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exec = function () {
    var that = this;
    judges.exec(arguments, function(callback) {
        if (that.__running) throw Error(&#x22;Batch is already running&#x22;);
        that.__running = true;
        async.eachSeries(that.__queue, function(op, done) {
            op.args.push(done);
            // if an exception is thrown here, it should be caught (because we
            // are in the middle of async process) and translated to an &#x27;err&#x27;
            // parameter.
            try {
                op.handle.apply(that.__image, op.args);
            } catch (e) {
                done(e);
            }
        }, function(err) {
            that.__queue.length = 0; // queue is now empty
            that.__running = false;
            callback(err, that.__image);
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

##### Execute batch and obtain the manipulated image object

When all desired operations had been queued, execute the batch with the `exec()`
method. `exec` takes a `callback` argument; `callback` is a function which
receives an error object and the manipulated image object:

`batch.<span class="apidocCodeKeywordSpan">exec</span>(callback)`

  - `callback {Function(err, image)}`:
    - `err`: An error object or `null` when no error.
    - `image`: An image object of the manipulated image.

```Javascript
batch.exec(function(err, image){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.fade" id="apidoc.element.lwip.Batch.prototype.fade">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>fade
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fade = function () {
    var that = this;
    judges.fade(arguments, function(delta) {
        that.__addOp(that.__image.fade, [delta].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
**Note:** The hue is shifted in a circular manner in the range [0,360] for each
pixel individually.

#### Fade

Adjust image transperancy.

`image.<span class="apidocCodeKeywordSpan">fade</span>(delta, callback)`

0. `delta {Float}`: By how much to increase / decrease the transperancy.
0. `callback {Function(err, image)}`

**Note:** The transparency is adjusted independently for each pixel.

**Examples**:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.flip" id="apidoc.element.lwip.Batch.prototype.flip">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>flip
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">flip = function () {
    var that = this;
    judges.mirror(arguments, function(axes) {
        that.__addOp(that.__image.mirror, [axes].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.hslaAdjust" id="apidoc.element.lwip.Batch.prototype.hslaAdjust">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>hslaAdjust
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hslaAdjust = function () {
    var that = this;
    judges.hslaAdjust(arguments, function(hs, sd, ld, ad) {
        that.__addOp(that.__image.hslaAdjust, [hs, sd, ld, ad].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        that.__addOp(that.__image.blur, [sigma].filter(undefinedFilter));
    });
    return this;
};

Batch.prototype.hslaAdjust = function() {
    var that = this;
    judges.<span class="apidocCodeKeywordSpan">hslaAdjust</span>(arguments, function(hs, sd, ld, ad) {
        that.__addOp(that.__image.hslaAdjust, [hs, sd, ld, ad].filter(undefinedFilter));
    });
    return this;
};

Batch.prototype.saturate = function() {
    var that = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.hue" id="apidoc.element.lwip.Batch.prototype.hue">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>hue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hue = function () {
    var that = this;
    judges.hue(arguments, function(shift) {
        that.__addOp(that.__image.hue, [shift].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Equivalent to `image.lighten(-delta, callback)`.

#### Hue

Adjust image hue.

`image.<span class="apidocCodeKeywordSpan">hue</span>(shift, callback)`

0. `shift {Float}`: By how many degrees to shift each pixel&#x27;s hue.
0. `callback {Function(err, image)}`

**Examples**:

0. `image.lighten(0, ...)` will have no effect on the image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.lighten" id="apidoc.element.lwip.Batch.prototype.lighten">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>lighten
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lighten = function () {
    var that = this;
    judges.lighten(arguments, function(delta) {
        that.__addOp(that.__image.lighten, [delta].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `image.saturate(-1, ...)` will decrease the saturation by 100%, effectively
   desaturating the image.

#### Lighten

Adjust image lightness.

`image.<span class="apidocCodeKeywordSpan">lighten</span>(delta, callback)`

0. `delta {Float}`: By how much to increase / decrease the lightness.
0. `callback {Function(err, image)}`

**Examples**:

0. `image.lighten(0, ...)` will have no effect on the image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.mirror" id="apidoc.element.lwip.Batch.prototype.mirror">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>mirror
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mirror = function () {
    var that = this;
    judges.mirror(arguments, function(axes) {
        that.__addOp(that.__image.mirror, [axes].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `amplitude {Float}`: Sharpening amplitude.
0. `callback {Function(err, image)}`

#### Mirror

Mirror an image along the &#x27;x&#x27; axis, &#x27;y&#x27; axis or both.

`image.<span class="apidocCodeKeywordSpan">mirror</span>(axes, callback)`

0. `axes {String}`: `&#x27;x&#x27;`, `&#x27;y&#x27;` or `&#x27;xy&#x27;` (case sensitive).
0. `callback {Function(err, image)}`

#### Flip

Alias of [`mirror`](#mirror).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.opacify" id="apidoc.element.lwip.Batch.prototype.opacify">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>opacify
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">opacify = function () {
    this.__addOp(this.__image.opacify, []);
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `image.fade(0.5, ...)` will increase the transparency by 50%.
0. `image.fade(1, ...)` will make the image completely transparent.

#### Opacify

Make image completely opaque.

`image.<span class="apidocCodeKeywordSpan">opacify</span>(callback)`

0. `callback {Function(err, image)}`

#### Paste

Paste an image on top of this image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.pad" id="apidoc.element.lwip.Batch.prototype.pad">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>pad
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pad = function () {
    var that = this;
    judges.pad(arguments, function(left, top, right, bottom, color) {
        color = normalizeColor(color);
        that.__addOp(that.__image.pad, [left, top, right, bottom, color].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Pad

Pad image edges with colored pixels.

`image.<span class="apidocCodeKeywordSpan">pad</span>(left, top, right, bottom, color, callback)`

0. `left, top, right, bottom {Integer}`: Number of pixels to add to each edge.
0. `color {String / Array / Object}`: **Optional** Color of the padding. See
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Saturate
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.paste" id="apidoc.element.lwip.Batch.prototype.paste">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>paste
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">paste = function () {
    var that = this;
    judges.paste(arguments, function(left, top, img) {
        that.__addOp(that.__image.paste, [left, top, img].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

0. `callback {Function(err, image)}`

#### Paste

Paste an image on top of this image.

`image.<span class="apidocCodeKeywordSpan">paste</span>(left, top, img, callback)`

0. `left, top {Integer}`: Coordinates of the top-left corner of the pasted
   image.
0. `img {Image object}`: The image to paste.
0. `callback {Function(err, image)}`

**Notes:**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.resize" id="apidoc.element.lwip.Batch.prototype.resize">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>resize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resize = function () {
    var that = this;
    judges.resize(arguments, function(width, height, inter) {
        that.__addOp(that.__image.resize, [width, height, inter].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### Open file example

```Javascript
var lwip = require(&#x27;lwip&#x27;);
lwip.open(&#x27;path/to/image.jpg&#x27;, function(err, image){
    // check &#x27;err&#x27;. use &#x27;image&#x27;.
    // image.<span class="apidocCodeKeywordSpan">resize</span>(...), etc.
});
```

#### Open buffer example

```Javascript
var fs = require(&#x27;fs&#x27;),
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.rotate" id="apidoc.element.lwip.Batch.prototype.rotate">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>rotate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rotate = function () {
    var that = this;
    judges.rotate(arguments, function(degs, color) {
        color = normalizeColor(color);
        that.__addOp(that.__image.rotate, [degs, color].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// obtain an image object:
require(&#x27;lwip&#x27;).open(&#x27;image.jpg&#x27;, function(err, image){

// check err...
// define a batch of manipulations and save to disk as JPEG:
image.batch()
  .scale(0.75)          // scale to 75%
  .<span class="apidocCodeKeywordSpan">rotate</span>(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
  .crop(200, 200)       // crop a 200X200 square from center
  .blur(5)              // Gaussian blur with SD=5
  .writeFile(&#x27;output.jpg&#x27;, function(err){
    // check err...
    // done.
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.saturate" id="apidoc.element.lwip.Batch.prototype.saturate">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>saturate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">saturate = function () {
    var that = this;
    judges.saturate(arguments, function(delta) {
        that.__addOp(that.__image.saturate, [delta].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Saturate

Adjust image saturation.

`image.<span class="apidocCodeKeywordSpan">saturate</span>(delta, callback)`

0. `delta {Float}`: By how much to increase / decrease the saturation.
0. `callback {Function(err, image)}`

**Examples**:

0. `image.saturate(0, ...)` will have no effect on the image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.scale" id="apidoc.element.lwip.Batch.prototype.scale">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>scale
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scale = function () {
    var that = this;
    judges.scale(arguments, function(wRatio, hRatio, inter) {
        that.__addOp(that.__image.scale, [wRatio, hRatio, inter].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```Javascript
// obtain an image object:
require(&#x27;lwip&#x27;).open(&#x27;image.jpg&#x27;, function(err, image){

// check err...
// define a batch of manipulations and save to disk as JPEG:
image.batch()
  .<span class="apidocCodeKeywordSpan">scale</span>(0.75)          // scale to 75%
  .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
  .crop(200, 200)       // crop a 200X200 square from center
  .blur(5)              // Gaussian blur with SD=5
  .writeFile(&#x27;output.jpg&#x27;, function(err){
    // check err...
    // done.
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.setPixel" id="apidoc.element.lwip.Batch.prototype.setPixel">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>setPixel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setPixel = function () {
    var that = this;
    judges.setPixel(arguments, function(left, top, color) {
        that.__addOp(that.__image.setPixel, [left, top, color].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. Extra caution is required when using this method in batch mode, as the images
   may change by the time this operation is called.

#### Set Pixel

Set the color of a pixel.

`image.<span class="apidocCodeKeywordSpan">setPixel</span>(left, top, color, callback)`

0. `left, top {Integer}`: Coordinates of the pixel from the left-top corner of
   the image.
0. `color {String / Array / Object}`: Color of the pixel to set.
   See [colors specification](#colors-specification).
0. `callback {Function(err, image)}`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.sharpen" id="apidoc.element.lwip.Batch.prototype.sharpen">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>sharpen
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sharpen = function () {
    var that = this;
    judges.sharpen(arguments, function(amplitude) {
        that.__addOp(that.__image.sharpen, [amplitude].filter(undefinedFilter));
    });
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `sigma {Float&#x3e;=0}`: Standard deviation of the Gaussian filter.
0. `callback {Function(err, image)}`

#### Sharpen

Inverse diffusion shapren.

`image.<span class="apidocCodeKeywordSpan">sharpen</span>(amplitude, callback)`

0. `amplitude {Float}`: Sharpening amplitude.
0. `callback {Function(err, image)}`

#### Mirror

Mirror an image along the &#x27;x&#x27; axis, &#x27;y&#x27; axis or both.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.toBuffer" id="apidoc.element.lwip.Batch.prototype.toBuffer">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>toBuffer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toBuffer = function () {
    var that = this;
    judges.toBuffer(arguments, function(type, params, callback) {
        if (type === &#x27;jpg&#x27; || type === &#x27;jpeg&#x27;) {
            util.normalizeJpegParams(params);
        } else if (type === &#x27;png&#x27;) {
            util.normalizePngParams(params);
        } else if (type === &#x27;gif&#x27;) {
            util.normalizeGifParams(params);
        } else throw Error(&#x27;Unknown type \&#x27;&#x27; + type + &#x27;\&#x27;&#x27;);
        that.exec(function(err, image) {
            if (err) return callback(err);
            image.toBuffer(type, params, callback);
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// check err...
// manipulate some more:
image.rotate(45, &#x27;white&#x27;, function(err, image){

  // check err...
  // encode to jpeg and get a buffer object:
  image.<span class="apidocCodeKeywordSpan">toBuffer</span>(&#x27;jpg&#x27;, function(err, buffer){

    // check err...
    // save buffer to disk / send over network / etc.

  });

});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Batch.prototype.writeFile" id="apidoc.element.lwip.Batch.prototype.writeFile">
        function <span class="apidocSignatureSpan">lwip.Batch.prototype.</span>writeFile
        <span class="apidocSignatureSpan">(outpath, type, params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeFile = function (outpath, type, params, callback) {
    var that = this;
    judges.writeFile(arguments, function(outpath, type, params, callback) {
        type = type || path.extname(outpath).slice(1).toLowerCase();
        that.toBuffer(type, params, function(err, buffer) {
            if (err) return callback(err);
            fs.writeFile(outpath, buffer, {
                encoding: &#x27;binary&#x27;
            }, callback);
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // check err...
  // define a batch of manipulations and save to disk as JPEG:
  image.batch()
    .scale(0.75)          // scale to 75%
    .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
    .crop(200, 200)       // crop a 200X200 square from center
    .blur(5)              // Gaussian blur with SD=5
    .<span class="apidocCodeKeywordSpan">writeFile</span>(&#x27;output.jpg&#x27;, function(err){
      // check err...
      // done.
    });

});
```
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lwip.Image" id="apidoc.module.lwip.Image">module lwip.Image</a></h1>


    <h2>
        <a href="#apidoc.element.lwip.Image.Image" id="apidoc.element.lwip.Image.Image">
        function <span class="apidocSignatureSpan">lwip.</span>Image
        <span class="apidocSignatureSpan">(pixelsBuf, width, height, trans, metadata)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Image(pixelsBuf, width, height, trans, metadata) {
    this.__lwip = new lwip_image.LwipImage(pixelsBuf, width, height);
    this.__locked = false;
    this.__trans = trans;
    this.__metadata = metadata;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lwip.Image.prototype" id="apidoc.module.lwip.Image.prototype">module lwip.Image.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.__lock" id="apidoc.element.lwip.Image.prototype.__lock">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>__lock
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__lock = function () {
    if (!this.__locked) this.__locked = true;
    else throw Error(&#x22;Another image operation already in progress&#x22;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        g: rgba[1],
        b: rgba[2],
        a: rgba[3]
    };
};

Image.prototype.scale = function() {
    this.<span class="apidocCodeKeywordSpan">__lock</span>();
    var that = this;
    judges.scale(
        arguments,
        function(wRatio, hRatio, inter, callback) {
            hRatio = hRatio || wRatio;
            var width = +wRatio * that.width(),
                height = +hRatio * that.height();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.__release" id="apidoc.element.lwip.Image.prototype.__release">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>__release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__release = function () {
    this.__locked = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        judges.scale(
arguments,
function(wRatio, hRatio, inter, callback) {
    hRatio = hRatio || wRatio;
    var width = +wRatio * that.width(),
        height = +hRatio * that.height();
    that.__lwip.resize(width, height, defs.interpolations[inter], function(err) {
        that.<span class="apidocCodeKeywordSpan">__release</span>();
        callback(err, that);
    });
},
function(err) {
    that.__release();
    throw err;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.batch" id="apidoc.element.lwip.Image.prototype.batch">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>batch
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">batch = function () {
    return new Batch(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```Javascript
// obtain an image object:
require(&#x27;lwip&#x27;).open(&#x27;image.jpg&#x27;, function(err, image){

// check err...
// define a batch of manipulations and save to disk as JPEG:
image.<span class="apidocCodeKeywordSpan">batch</span>()
  .scale(0.75)          // scale to 75%
  .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
  .crop(200, 200)       // crop a 200X200 square from center
  .blur(5)              // Gaussian blur with SD=5
  .writeFile(&#x27;output.jpg&#x27;, function(err){
    // check err...
    // done.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.blur" id="apidoc.element.lwip.Image.prototype.blur">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>blur
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">blur = function () {
    this.__lock();
    var that = this;
    judges.blur(
        arguments,
        function(sigma, callback) {
            that.__lwip.blur(+sigma, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // check err...
  // define a batch of manipulations and save to disk as JPEG:
  image.batch()
    .scale(0.75)          // scale to 75%
    .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
    .crop(200, 200)       // crop a 200X200 square from center
    .<span class="apidocCodeKeywordSpan">blur</span>(5)              // Gaussian blur with SD=5
    .writeFile(&#x27;output.jpg&#x27;, function(err){
      // check err...
      // done.
    });

});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.border" id="apidoc.element.lwip.Image.prototype.border">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>border
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">border = function () {
    this.__lock();
    var that = this;
    judges.border(
        arguments,
        function(width, color, callback) {
            color = normalizeColor(color);
            if (color.a &#x3c; 100) that.__trans = true;
            // we can just use image.pad...
            that.__lwip.pad(+width, +width, +width, +width, +color.r, +color.g, +color.b, +color.a, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Alias of [`mirror`](#mirror).

#### Border

Add a colored border to the image.

`image.<span class="apidocCodeKeywordSpan">border</span>(width, color, callback)`

0. `width {Integer}`: Border width in pixels.
0. `color {String / Array / Object}`: **Optional** Color of the border. See
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Pad
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.clone" id="apidoc.element.lwip.Image.prototype.clone">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>clone
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function () {
    // no need to lock the image. we don&#x27;t modify the memory buffer.
    // just copy it.
    var that = this;
    judges.clone(
        arguments,
        function(callback) {
            // first we retrieve what we need (buffer, dimensions, ...)
            // synchronously so that the original image doesn&#x27;t have a chance
            // to be changed (remember, we don&#x27;t lock it); and only then call
            // the callback asynchronously.
            var pixbuff = that.__lwip.buffer(),
                width = that.__lwip.width(),
                height = that.__lwip.height(),
                trans = that.__trans;
            setImmediate(function() {
                callback(null, new Image(pixbuff, width, height, trans));
            });
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Color is returned as an object. See [colors specification](#colors-specification).

#### Clone

Clone the image into a new image object.

`image.<span class="apidocCodeKeywordSpan">clone</span>(callback)`

0. `callback {Function(err, newImage)}`

**Example**: See [`examples/clone.js`](examples/clone.js)

**Note**: The image is cloned to the state it was at the time
`image.clone( ... )` was called, eventhough `callback` is called asynchronously.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.contain" id="apidoc.element.lwip.Image.prototype.contain">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>contain
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">contain = function () {
    var that = this;
    judges.contain(
        arguments,
        function(width, height, color, inter, callback) {
            var s = Math.min(width / that.width(), height / that.height());
            that.scale(s, s, inter, function(err){
                if (err) return callback(err);
                var padX = (width - that.width()) / 2,
                    padY = (height - that.height()) / 2;
                that.pad(
                    Math.ceil(padX),
                    Math.ceil(padY),
                    Math.floor(padX),
                    Math.floor(padY),
                    color,
                    callback
                );
            });
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `callback {Function(err, image)}`

#### Contain

Contain the image in a colored canvas. The image will be resized to the largest
possible size such that it&#x27;s fully contained inside the canvas.

`image.<span class="apidocCodeKeywordSpan">contain</span>(width, height, color, inter, callback)`

0. `width {Integer}`: Canvas&#x27; width in pixels.
0. `height {Integer}`: Canvas&#x27; height in pixels.
0. `color {String / Array / Object}`: **Optional** Color of the canvas. See
[colors specification](#colors-specification).
0. `inter {String}`: **Optional** interpolation method. Defaults to `&#x22;lanczos&#x22;`.
Possible values:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.cover" id="apidoc.element.lwip.Image.prototype.cover">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>cover
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cover = function () {
    var that = this;
    judges.cover(
        arguments,
        function(width, height, inter, callback) {
            var s = Math.max(width / that.width(), height / that.height());
            that.scale(s, s, inter, function(err){
                if (err) return callback(err);
                that.crop(width, height, callback);
            });
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### Cover

Cover a canvas with the image. The image will be resized to the smallest
possible size such that both its dimensions are bigger than the canvas&#x27;s
dimensions. Margins of the image exceeding the canvas will be discarded.

`image.<span class="apidocCodeKeywordSpan">cover</span>(width, height, inter, callback)`

0. `width {Integer}`: Canvas&#x27; width in pixels.
0. `height {Integer}`: Canvas&#x27; height in pixels.
0. `inter {String}`: **Optional** interpolation method. Defaults to `&#x22;lanczos&#x22;`.
Possible values:
- `&#x22;nearest-neighbor&#x22;`
- `&#x22;moving-average&#x22;`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.crop" id="apidoc.element.lwip.Image.prototype.crop">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>crop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">crop = function () {
    this.__lock();
    var that = this;
    judges.crop(
        arguments,
        function(left, top, right, bottom, callback) {
            if (!right &#x26;&#x26; !bottom) {
                var size = that.size(),
                    width = left,
                    height = top;
                left = 0 | (size.width - width) / 2;
                top = 0 | (size.height - height) / 2;
                right = left + width - 1;
                bottom = top + height - 1;
            }
            that.__lwip.crop(left, top, right, bottom, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
require(&#x27;lwip&#x27;).open(&#x27;image.jpg&#x27;, function(err, image){

  // check err...
  // define a batch of manipulations and save to disk as JPEG:
  image.batch()
    .scale(0.75)          // scale to 75%
    .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
    .<span class="apidocCodeKeywordSpan">crop</span>(200, 200)       // crop a 200X200 square from center
    .blur(5)              // Gaussian blur with SD=5
    .writeFile(&#x27;output.jpg&#x27;, function(err){
      // check err...
      // done.
    });

});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.darken" id="apidoc.element.lwip.Image.prototype.darken">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>darken
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">darken = function () {
    this.__lock();
    var that = this;
    judges.darken(
        arguments,
        function(delta, callback) {
            that.__lwip.hslaAdj(0, 0, -delta, 0, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `image.lighten(-1, ...)` will decrease the lightness by 100%, effectively
   making the image black.

#### Darken

Adjust image lightness.

`image.<span class="apidocCodeKeywordSpan">darken</span>(delta, callback)`

Equivalent to `image.lighten(-delta, callback)`.

#### Hue

Adjust image hue.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.extract" id="apidoc.element.lwip.Image.prototype.extract">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>extract
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extract = function () {
    // no need to lock the image. we don&#x27;t modify the memory buffer.
    // just copy it and then crop it.
    var that = this;
    judges.extract(
        arguments,
        function(left, top, right, bottom, callback) {
            // first we retrieve what we need (buffer, dimensions, ...)
            // synchronously so that the original image doesn&#x27;t have a chance
            // to be changed (remember, we don&#x27;t lock it); then we crop it and
            // only call the callback asynchronously.
            var pixbuff = that.__lwip.buffer(),
                width = that.__lwip.width(),
                height = that.__lwip.height(),
                trans = that.__trans,
                eximg = new Image(pixbuff, width, height, trans);
            eximg.__lwip.crop(left, top, right, bottom, function(err) {
                callback(err, eximg);
            });
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
```

#### Extract

Copy an area of the image into a new image object.

`image.<span class="apidocCodeKeywordSpan">extract</span>(left, top, right, bottom, callback)`

0. `left, top, right, bottom {Integer}`: Coordinates of the area to copy.
0. `callback {Function(err, newImage)}`

**Example**: See [`examples/extract.js`](examples/extract.js)

**Note**: The sub-image is extracted from the original image in the state it was
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.fade" id="apidoc.element.lwip.Image.prototype.fade">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>fade
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fade = function () {
    this.__lock();
    var that = this;
    judges.fade(
        arguments,
        function(delta, callback) {
            that.__lwip.hslaAdj(0, 0, 0, -delta, function(err) {
                if (+delta &#x3e; 0) that.__trans = true;
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
**Note:** The hue is shifted in a circular manner in the range [0,360] for each
pixel individually.

#### Fade

Adjust image transperancy.

`image.<span class="apidocCodeKeywordSpan">fade</span>(delta, callback)`

0. `delta {Float}`: By how much to increase / decrease the transperancy.
0. `callback {Function(err, image)}`

**Note:** The transparency is adjusted independently for each pixel.

**Examples**:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.flip" id="apidoc.element.lwip.Image.prototype.flip">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>flip
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">flip = function () {
    this.__lock();
    var that = this;
    judges.mirror(
        arguments,
        function(axes, callback) {
            var xaxis = false,
                yaxis = false;
            if (&#x27;x&#x27; === axes) xaxis = true;
            if (&#x27;y&#x27; === axes) yaxis = true;
            if (&#x27;xy&#x27; === axes || &#x27;yx&#x27; === axes) {
                xaxis = true;
                yaxis = true;
            }
            that.__lwip.mirror(xaxis, yaxis, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.getMetadata" id="apidoc.element.lwip.Image.prototype.getMetadata">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>getMetadata
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMetadata = function () {
    return this.__metadata;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### Get Metadata

Get the textual metadata from an image. This is currently only supported for
tEXt chunks in PNG images, and will get the first tEXt chunk found with the key
`lwip_data`. If none is found, returns null.

`image.<span class="apidocCodeKeywordSpan">getMetadata</span>()`

### Batch operations

Each of the [image operations](#image-operations) above can be done as part of
a batch of operations. Operations can be queued, and executed as a batch at any
time.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.getPixel" id="apidoc.element.lwip.Image.prototype.getPixel">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>getPixel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getPixel = function () {
    var args = judges.getPixel(arguments),
        left = args[0],
        top = args[1];

    if (left &#x3e;= this.width() || top &#x3e;= this.height())
        throw Error(&#x22;Coordinates exceed dimensions of image&#x22;);

    var rgba = this.__lwip.getPixel(left, top);

    return {
        r: rgba[0],
        g: rgba[1],
        b: rgba[2],
        a: rgba[3]
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### Height

`image.height()` returns the image&#x27;s height in pixels.

#### Get Pixel

`image.<span class="apidocCodeKeywordSpan">getPixel</span>(left, top)` returns the color of the pixel at the `(left, top)`
coordinate.

0. `left {Integer&#x3e;=0}`
0. `top {Integer&#x3e;=0}`

Color is returned as an object. See [colors specification](#colors-specification).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.height" id="apidoc.element.lwip.Image.prototype.height">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>height
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">height = function () {
    return this.__lwip.height();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### Width

`image.width()` returns the image&#x27;s width in pixels.

#### Height

`image.<span class="apidocCodeKeywordSpan">height</span>()` returns the image&#x27;s height in pixels.

#### Get Pixel

`image.getPixel(left, top)` returns the color of the pixel at the `(left, top)`
coordinate.

0. `left {Integer&#x3e;=0}`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.hslaAdjust" id="apidoc.element.lwip.Image.prototype.hslaAdjust">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>hslaAdjust
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hslaAdjust = function () {
    this.__lock();
    var that = this;
    judges.hslaAdjust(
        arguments,
        function(hs, sd, ld, ad, callback) {
            that.__lwip.hslaAdj(+hs, +sd, +ld, +ad, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        that.__addOp(that.__image.blur, [sigma].filter(undefinedFilter));
    });
    return this;
};

Batch.prototype.hslaAdjust = function() {
    var that = this;
    judges.<span class="apidocCodeKeywordSpan">hslaAdjust</span>(arguments, function(hs, sd, ld, ad) {
        that.__addOp(that.__image.hslaAdjust, [hs, sd, ld, ad].filter(undefinedFilter));
    });
    return this;
};

Batch.prototype.saturate = function() {
    var that = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.hue" id="apidoc.element.lwip.Image.prototype.hue">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>hue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hue = function () {
    this.__lock();
    var that = this;
    judges.hue(
        arguments,
        function(shift, callback) {
            that.__lwip.hslaAdj(+shift, 0, 0, 0, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Equivalent to `image.lighten(-delta, callback)`.

#### Hue

Adjust image hue.

`image.<span class="apidocCodeKeywordSpan">hue</span>(shift, callback)`

0. `shift {Float}`: By how many degrees to shift each pixel&#x27;s hue.
0. `callback {Function(err, image)}`

**Examples**:

0. `image.lighten(0, ...)` will have no effect on the image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.lighten" id="apidoc.element.lwip.Image.prototype.lighten">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>lighten
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lighten = function () {
    this.__lock();
    var that = this;
    judges.lighten(
        arguments,
        function(delta, callback) {
            that.__lwip.hslaAdj(0, 0, +delta, 0, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `image.saturate(-1, ...)` will decrease the saturation by 100%, effectively
   desaturating the image.

#### Lighten

Adjust image lightness.

`image.<span class="apidocCodeKeywordSpan">lighten</span>(delta, callback)`

0. `delta {Float}`: By how much to increase / decrease the lightness.
0. `callback {Function(err, image)}`

**Examples**:

0. `image.lighten(0, ...)` will have no effect on the image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.mirror" id="apidoc.element.lwip.Image.prototype.mirror">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>mirror
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mirror = function () {
    this.__lock();
    var that = this;
    judges.mirror(
        arguments,
        function(axes, callback) {
            var xaxis = false,
                yaxis = false;
            if (&#x27;x&#x27; === axes) xaxis = true;
            if (&#x27;y&#x27; === axes) yaxis = true;
            if (&#x27;xy&#x27; === axes || &#x27;yx&#x27; === axes) {
                xaxis = true;
                yaxis = true;
            }
            that.__lwip.mirror(xaxis, yaxis, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `amplitude {Float}`: Sharpening amplitude.
0. `callback {Function(err, image)}`

#### Mirror

Mirror an image along the &#x27;x&#x27; axis, &#x27;y&#x27; axis or both.

`image.<span class="apidocCodeKeywordSpan">mirror</span>(axes, callback)`

0. `axes {String}`: `&#x27;x&#x27;`, `&#x27;y&#x27;` or `&#x27;xy&#x27;` (case sensitive).
0. `callback {Function(err, image)}`

#### Flip

Alias of [`mirror`](#mirror).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.opacify" id="apidoc.element.lwip.Image.prototype.opacify">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>opacify
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">opacify = function () {
    this.__lock();
    var that = this;
    judges.opacify(
        arguments,
        function(callback) {
            that.__lwip.opacify(function(err) {
                that.__trans = false;
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `image.fade(0.5, ...)` will increase the transparency by 50%.
0. `image.fade(1, ...)` will make the image completely transparent.

#### Opacify

Make image completely opaque.

`image.<span class="apidocCodeKeywordSpan">opacify</span>(callback)`

0. `callback {Function(err, image)}`

#### Paste

Paste an image on top of this image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.pad" id="apidoc.element.lwip.Image.prototype.pad">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>pad
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pad = function () {
    this.__lock();
    var that = this;
    judges.pad(
        arguments,
        function(left, top, right, bottom, color, callback) {
            color = normalizeColor(color);
            if (color.a &#x3c; 100) that.__trans = true;
            that.__lwip.pad(+left, +top, +right, +bottom, +color.r, +color.g, +color.b, +color.a, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Pad

Pad image edges with colored pixels.

`image.<span class="apidocCodeKeywordSpan">pad</span>(left, top, right, bottom, color, callback)`

0. `left, top, right, bottom {Integer}`: Number of pixels to add to each edge.
0. `color {String / Array / Object}`: **Optional** Color of the padding. See
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Saturate
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.paste" id="apidoc.element.lwip.Image.prototype.paste">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>paste
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">paste = function () {
    this.__lock();
    var that = this;
    try{
        judges.paste(
            arguments,
            function(left, top, img, callback) {
                // first we retrieve what we need (buffer, dimensions, ...)
                // synchronously so that the pasted image doesn&#x27;t have a chance
                // to be changed
                var pixbuff = img.__lwip.buffer(),
                    width = img.__lwip.width(),
                    height = img.__lwip.height();
                if (left + width &#x3e; that.__lwip.width() || top + height &#x3e; that.__lwip.height())
                    throw Error(&#x22;Pasted image exceeds dimensions of base image&#x22;);
                that.__lwip.paste(+left, +top, pixbuff, +width, +height, function(err) {
                    that.__release();
                    callback(err, that);
                });
            }
        );
    } catch(err){
        that.__release();
        throw err;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

0. `callback {Function(err, image)}`

#### Paste

Paste an image on top of this image.

`image.<span class="apidocCodeKeywordSpan">paste</span>(left, top, img, callback)`

0. `left, top {Integer}`: Coordinates of the top-left corner of the pasted
   image.
0. `img {Image object}`: The image to paste.
0. `callback {Function(err, image)}`

**Notes:**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.resize" id="apidoc.element.lwip.Image.prototype.resize">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>resize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resize = function () {
    this.__lock();
    var that = this;
    judges.resize(
        arguments,
        function(width, height, inter, callback) {
            height = height || width;
            that.__lwip.resize(+width, +height, defs.interpolations[inter], function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### Open file example

```Javascript
var lwip = require(&#x27;lwip&#x27;);
lwip.open(&#x27;path/to/image.jpg&#x27;, function(err, image){
    // check &#x27;err&#x27;. use &#x27;image&#x27;.
    // image.<span class="apidocCodeKeywordSpan">resize</span>(...), etc.
});
```

#### Open buffer example

```Javascript
var fs = require(&#x27;fs&#x27;),
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.rotate" id="apidoc.element.lwip.Image.prototype.rotate">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>rotate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rotate = function () {
    this.__lock();
    var that = this;
    judges.rotate(
        arguments,
        function(degs, color, callback) {
            color = normalizeColor(color);
            if (color.a &#x3c; 100) that.__trans = true;
            that.__lwip.rotate(+degs, +color.r, +color.g, +color.b, +color.a, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// obtain an image object:
require(&#x27;lwip&#x27;).open(&#x27;image.jpg&#x27;, function(err, image){

// check err...
// define a batch of manipulations and save to disk as JPEG:
image.batch()
  .scale(0.75)          // scale to 75%
  .<span class="apidocCodeKeywordSpan">rotate</span>(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
  .crop(200, 200)       // crop a 200X200 square from center
  .blur(5)              // Gaussian blur with SD=5
  .writeFile(&#x27;output.jpg&#x27;, function(err){
    // check err...
    // done.
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.saturate" id="apidoc.element.lwip.Image.prototype.saturate">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>saturate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">saturate = function () {
    this.__lock();
    var that = this;
    judges.saturate(
        arguments,
        function(delta, callback) {
            that.__lwip.hslaAdj(0, +delta, 0, 0, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   [colors specification](#colors-specification).
0. `callback {Function(err, image)}`

#### Saturate

Adjust image saturation.

`image.<span class="apidocCodeKeywordSpan">saturate</span>(delta, callback)`

0. `delta {Float}`: By how much to increase / decrease the saturation.
0. `callback {Function(err, image)}`

**Examples**:

0. `image.saturate(0, ...)` will have no effect on the image.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.scale" id="apidoc.element.lwip.Image.prototype.scale">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>scale
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scale = function () {
    this.__lock();
    var that = this;
    judges.scale(
        arguments,
        function(wRatio, hRatio, inter, callback) {
            hRatio = hRatio || wRatio;
            var width = +wRatio * that.width(),
                height = +hRatio * that.height();
            that.__lwip.resize(width, height, defs.interpolations[inter], function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```Javascript
// obtain an image object:
require(&#x27;lwip&#x27;).open(&#x27;image.jpg&#x27;, function(err, image){

// check err...
// define a batch of manipulations and save to disk as JPEG:
image.batch()
  .<span class="apidocCodeKeywordSpan">scale</span>(0.75)          // scale to 75%
  .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
  .crop(200, 200)       // crop a 200X200 square from center
  .blur(5)              // Gaussian blur with SD=5
  .writeFile(&#x27;output.jpg&#x27;, function(err){
    // check err...
    // done.
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.setMetadata" id="apidoc.element.lwip.Image.prototype.setMetadata">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>setMetadata
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setMetadata = function (data) {
    if (typeof data != &#x22;string&#x22; &#x26;&#x26; data != null) {
        throw Error(&#x22;Metadata must be a string or null&#x22;);
    }

    this.__metadata = data;
    return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
#### Set metadata

Set the metadata in an image. This is currently only supported for PNG files.
Sets a tEXt chunk with the key `lwip_data` and comment as the given string. If
called with a `null` parameter, removes existing metadata from the image,
if present.

`image.<span class="apidocCodeKeywordSpan">setMetadata</span>(metadata)`

0. `metadata {String}`: a string of arbitrary length, or null.

### Getters

#### Width
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.setPixel" id="apidoc.element.lwip.Image.prototype.setPixel">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>setPixel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setPixel = function () {
    this.__lock();
    var that = this;
    try{
        judges.setPixel(
            arguments,
            function(left, top, color, callback) {
                if (left &#x3e;= that.width() || top &#x3e;= that.height())
                    throw Error(&#x22;Coordinates exceed dimensions of image&#x22;);
                color = normalizeColor(color);
                if (color.a &#x3c; 100) that.__trans = true;
                that.__lwip.setPixel(+left, +top, +color.r, +color.g, +color.b, +color.a, function(err) {
                    that.__release();
                    callback(err, that);
                });
            }
        );
    } catch(err){
        that.__release();
        throw err;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. Extra caution is required when using this method in batch mode, as the images
   may change by the time this operation is called.

#### Set Pixel

Set the color of a pixel.

`image.<span class="apidocCodeKeywordSpan">setPixel</span>(left, top, color, callback)`

0. `left, top {Integer}`: Coordinates of the pixel from the left-top corner of
   the image.
0. `color {String / Array / Object}`: Color of the pixel to set.
   See [colors specification](#colors-specification).
0. `callback {Function(err, image)}`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.sharpen" id="apidoc.element.lwip.Image.prototype.sharpen">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>sharpen
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sharpen = function () {
    this.__lock();
    var that = this;
    judges.sharpen(
        arguments,
        function(amplitude, callback) {
            that.__lwip.sharpen(+amplitude, function(err) {
                that.__release();
                callback(err, that);
            });
        },
        function(err) {
            that.__release();
            throw err;
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0. `sigma {Float&#x3e;=0}`: Standard deviation of the Gaussian filter.
0. `callback {Function(err, image)}`

#### Sharpen

Inverse diffusion shapren.

`image.<span class="apidocCodeKeywordSpan">sharpen</span>(amplitude, callback)`

0. `amplitude {Float}`: Sharpening amplitude.
0. `callback {Function(err, image)}`

#### Mirror

Mirror an image along the &#x27;x&#x27; axis, &#x27;y&#x27; axis or both.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.size" id="apidoc.element.lwip.Image.prototype.size">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>size
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">size = function () {
    return {
        width: this.__lwip.width(),
        height: this.__lwip.height()
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    Image.prototype.crop = function() {
this.__lock();
var that = this;
judges.crop(
    arguments,
    function(left, top, right, bottom, callback) {
        if (!right &#x26;&#x26; !bottom) {
            var size = that.<span class="apidocCodeKeywordSpan">size</span>(),
                width = left,
                height = top;
            left = 0 | (size.width - width) / 2;
            top = 0 | (size.height - height) / 2;
            right = left + width - 1;
            bottom = top + height - 1;
        }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.toBuffer" id="apidoc.element.lwip.Image.prototype.toBuffer">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>toBuffer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toBuffer = function () {
    this.__lock();
    var that = this;
    try{
        judges.toBuffer(
            arguments,
            function(type, params, callback) {
                if (type === &#x27;jpg&#x27; || type === &#x27;jpeg&#x27;) {
                    util.normalizeJpegParams(params);
                    return encoder.jpeg(
                        that.__lwip.buffer(),
                        that.__lwip.width(),
                        that.__lwip.height(),
                        params.quality,
                        encoderCb
                    );
                } else if (type === &#x27;png&#x27;) {
                    util.normalizePngParams(params);
                    return encoder.png(
                        that.__lwip.buffer(),
                        that.__lwip.width(),
                        that.__lwip.height(),
                        params.compression,
                        params.interlaced,
                        params.transparency === &#x27;auto&#x27; ? that.__trans : params.transparency,
                        that.__metadata,
                        encoderCb
                    );
                } else if (type === &#x27;gif&#x27;) {
                    util.normalizeGifParams(params);
                    return encoder.gif(
                        that.__lwip.buffer(),
                        that.__lwip.width(),
                        that.__lwip.height(),
                        util.getClosest2Exp(params.colors),
                        params.colors,
                        params.interlaced,
                        params.transparency === &#x27;auto&#x27; ? that.__trans : params.transparency,
                        params.threshold,
                        encoderCb
                    );
                } else throw Error(&#x27;Unknown type \&#x27;&#x27; + type + &#x27;\&#x27;&#x27;);

                function encoderCb(err, buffer) {
                    that.__release();
                    callback(err, buffer);
                }
            }
        );
    } catch (err){
        that.__release();
        throw err;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// check err...
// manipulate some more:
image.rotate(45, &#x27;white&#x27;, function(err, image){

  // check err...
  // encode to jpeg and get a buffer object:
  image.<span class="apidocCodeKeywordSpan">toBuffer</span>(&#x27;jpg&#x27;, function(err, buffer){

    // check err...
    // save buffer to disk / send over network / etc.

  });

});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.width" id="apidoc.element.lwip.Image.prototype.width">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>width
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">width = function () {
    return this.__lwip.width();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

0. `metadata {String}`: a string of arbitrary length, or null.

### Getters

#### Width

`image.<span class="apidocCodeKeywordSpan">width</span>()` returns the image&#x27;s width in pixels.

#### Height

`image.height()` returns the image&#x27;s height in pixels.

#### Get Pixel
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.Image.prototype.writeFile" id="apidoc.element.lwip.Image.prototype.writeFile">
        function <span class="apidocSignatureSpan">lwip.Image.prototype.</span>writeFile
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeFile = function () {
    var that = this;
    judges.writeFile(
        arguments,
        function(outpath, type, params, callback) {
            type = type || path.extname(outpath).slice(1).toLowerCase();
            that.toBuffer(type, params, function(err, buffer) {
                if (err) return callback(err);
                fs.writeFile(outpath, buffer, {
                    encoding: &#x27;binary&#x27;
                }, callback);
            });
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // check err...
  // define a batch of manipulations and save to disk as JPEG:
  image.batch()
    .scale(0.75)          // scale to 75%
    .rotate(45, &#x27;white&#x27;)  // rotate 45degs clockwise (white fill)
    .crop(200, 200)       // crop a 200X200 square from center
    .blur(5)              // Gaussian blur with SD=5
    .<span class="apidocCodeKeywordSpan">writeFile</span>(&#x27;output.jpg&#x27;, function(err){
      // check err...
      // done.
    });

});
```
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lwip.util" id="apidoc.module.lwip.util">module lwip.util</a></h1>


    <h2>
        <a href="#apidoc.element.lwip.util.getClosest2Exp" id="apidoc.element.lwip.util.getClosest2Exp">
        function <span class="apidocSignatureSpan">lwip.util.</span>getClosest2Exp
        <span class="apidocSignatureSpan">(num)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getClosest2Exp(num){
    // num is assumed to be between 2 and 256
    // returned the closes 2 exponent which is **larger** than num
    var e, n, min, r;
    for (e = 1 ; e &#x3c;= 8; e++){
        n = 1 &#x3c;&#x3c; e;
        if (num === n) return n;
        if (!min) { min = num - n; r = e; }
        else if (num - n &#x3c; min){
            min = num - n;
            r = e;
            if (min &#x3c; 0) return 1 &#x3c;&#x3c; r;
        }
    }
    return 256;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    );
} else if (type === &#x27;gif&#x27;) {
    util.normalizeGifParams(params);
    return encoder.gif(
        that.__lwip.buffer(),
        that.__lwip.width(),
        that.__lwip.height(),
        util.<span class="apidocCodeKeywordSpan">getClosest2Exp</span>(params.colors),
        params.colors,
        params.interlaced,
        params.transparency === &#x27;auto&#x27; ? that.__trans : params.transparency,
        params.threshold,
        encoderCb
    );
} else throw Error(&#x27;Unknown type \&#x27;&#x27; + type + &#x27;\&#x27;&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.util.makeRgbaBuffer" id="apidoc.element.lwip.util.makeRgbaBuffer">
        function <span class="apidocSignatureSpan">lwip.util.</span>makeRgbaBuffer
        <span class="apidocSignatureSpan">(orig, channels)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeRgbaBuffer(orig, channels){
    var chanLen = orig.length / channels;
    if (chanLen !== parseInt(chanLen) || channels &#x3c; 1 || channels &#x3e; 3)
        throw Error(&#x22;Incorrect number of channels in original buffer&#x22;);
    var rgba = new Buffer(chanLen * 4);
    switch (channels){
        case 1:
            orig.copy(rgba, 0, 0, chanLen);
            orig.copy(rgba, chanLen, 0, chanLen);
            orig.copy(rgba, 2 * chanLen, 0, chanLen);
            rgba.fill(100, 3 * chanLen);
            break;
        case 2:
            orig.copy(rgba, 0, 0, chanLen);
            orig.copy(rgba, chanLen, 0, chanLen);
            orig.copy(rgba, 2 * chanLen, 0, chanLen);
            orig.copy(rgba, 3 * chanLen, chanLen);
            break;
        case 3:
            orig.copy(rgba, 0, 0, chanLen);
            orig.copy(rgba, chanLen, chanLen, 2 * chanLen);
            orig.copy(rgba, 2 * chanLen, 2 * chanLen);
            rgba.fill(100, 3 * chanLen);
            break;
    }
    return rgba;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.util.normalizeColor" id="apidoc.element.lwip.util.normalizeColor">
        function <span class="apidocSignatureSpan">lwip.util.</span>normalizeColor
        <span class="apidocSignatureSpan">(color)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizeColor(color) {
    if (typeof color === &#x27;string&#x27;) {
        color = defs.colors[color];
    } else if (color instanceof Array) {
        color = {
            r: color[0],
            g: color[1],
            b: color[2],
            a: color[3]
        };
    }
    if (color.a !== 0) color.a = color.a || defs.defaults.DEF_COLOR_ALPHA;
    return color;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.util.normalizeGifParams" id="apidoc.element.lwip.util.normalizeGifParams">
        function <span class="apidocSignatureSpan">lwip.util.</span>normalizeGifParams
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizeGifParams(params){
    params.colors = params.colors || defs.defaults.GIF_DEF_COLORS;
    if (params.colors != parseInt(params.colors) || params.colors &#x3c; 2 || params.colors &#x3e; 256)
        throw Error(&#x27;Invalid GIF color table size&#x27;);
    params.interlaced = params.interlaced || defs.defaults.GIF_DEF_INTERLACED;
    if (typeof params.interlaced !== &#x27;boolean&#x27;)
        throw Error(&#x27;GIF \&#x27;interlaced\&#x27; must be boolean&#x27;);
    if (params.transparency !== false)
        params.transparency = params.transparency || defs.defaults.GIF_DEF_TRANSPARENT;
    if (typeof params.transparency !== &#x27;boolean&#x27;){
        if (typeof params.transparency !== &#x27;string&#x27; ||
            params.transparency.toLowerCase() !== &#x27;auto&#x27;)
            throw Error(&#x27;GIF \&#x27;transparency\&#x27; must be boolean or \&#x27;auto\&#x27;&#x27;);
    }
    if (params.threshold !== 0) params.threshold = params.threshold || defs.defaults.GIF_DEF_THRESHOLD;
    if (params.threshold != parseInt(params.threshold) || params.threshold &#x3c; 0 || params.threshold &#x3e; 100)
        throw Error(&#x27;Invalid GIF transparency threshold&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var that = this;
    judges.toBuffer(arguments, function(type, params, callback) {
        if (type === &#x27;jpg&#x27; || type === &#x27;jpeg&#x27;) {
            util.normalizeJpegParams(params);
        } else if (type === &#x27;png&#x27;) {
            util.normalizePngParams(params);
        } else if (type === &#x27;gif&#x27;) {
            util.<span class="apidocCodeKeywordSpan">normalizeGifParams</span>(params);
        } else throw Error(&#x27;Unknown type \&#x27;&#x27; + type + &#x27;\&#x27;&#x27;);
        that.exec(function(err, image) {
            if (err) return callback(err);
            image.toBuffer(type, params, callback);
        });
    });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.util.normalizeJpegParams" id="apidoc.element.lwip.util.normalizeJpegParams">
        function <span class="apidocSignatureSpan">lwip.util.</span>normalizeJpegParams
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizeJpegParams(params){
    if (params.quality !== 0)
        params.quality = params.quality || defs.defaults.DEF_JPEG_QUALITY;
    if (params.quality != parseInt(params.quality) ||
        params.quality &#x3c; 0 || params.quality &#x3e; 100)
        throw Error(&#x27;Invalid JPEG quality&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return this;
};

Batch.prototype.toBuffer = function() {
    var that = this;
    judges.toBuffer(arguments, function(type, params, callback) {
        if (type === &#x27;jpg&#x27; || type === &#x27;jpeg&#x27;) {
            util.<span class="apidocCodeKeywordSpan">normalizeJpegParams</span>(params);
        } else if (type === &#x27;png&#x27;) {
            util.normalizePngParams(params);
        } else if (type === &#x27;gif&#x27;) {
            util.normalizeGifParams(params);
        } else throw Error(&#x27;Unknown type \&#x27;&#x27; + type + &#x27;\&#x27;&#x27;);
        that.exec(function(err, image) {
            if (err) return callback(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.util.normalizePngParams" id="apidoc.element.lwip.util.normalizePngParams">
        function <span class="apidocSignatureSpan">lwip.util.</span>normalizePngParams
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizePngParams(params){
    params.compression = params.compression || defs.defaults.PNG_DEF_COMPRESSION;
    if (params.compression === &#x27;none&#x27;) params.compression = 0;
    else if (params.compression === &#x27;fast&#x27;) params.compression = 1;
    else if (params.compression === &#x27;high&#x27;) params.compression = 2;
    else if ([0, 1, 2].indexOf(params.compression) === -1)
        throw Error(&#x27;Invalid PNG compression&#x27;);
    params.interlaced = params.interlaced || defs.defaults.PNG_DEF_INTERLACED;
    if (typeof params.interlaced !== &#x27;boolean&#x27;)
        throw Error(&#x27;PNG \&#x27;interlaced\&#x27; must be boolean&#x27;);
    if (params.transparency !== false)
        params.transparency = params.transparency || defs.defaults.PNG_DEF_TRANSPARENT;
    if (typeof params.transparency !== &#x27;boolean&#x27;){
        if (typeof params.transparency !== &#x27;string&#x27; ||
            params.transparency.toLowerCase() !== &#x27;auto&#x27;)
            throw Error(&#x27;PNG \&#x27;transparency\&#x27; must be boolean or \&#x27;auto\&#x27;&#x27;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    Batch.prototype.toBuffer = function() {
var that = this;
judges.toBuffer(arguments, function(type, params, callback) {
    if (type === &#x27;jpg&#x27; || type === &#x27;jpeg&#x27;) {
        util.normalizeJpegParams(params);
    } else if (type === &#x27;png&#x27;) {
        util.<span class="apidocCodeKeywordSpan">normalizePngParams</span>(params);
    } else if (type === &#x27;gif&#x27;) {
        util.normalizeGifParams(params);
    } else throw Error(&#x27;Unknown type \&#x27;&#x27; + type + &#x27;\&#x27;&#x27;);
    that.exec(function(err, image) {
        if (err) return callback(err);
        image.toBuffer(type, params, callback);
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lwip.util.undefinedFilter" id="apidoc.element.lwip.util.undefinedFilter">
        function <span class="apidocSignatureSpan">lwip.util.</span>undefinedFilter
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function undefinedFilter(v) {
    return v !== undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
